---
layout:     post 
title:      Java
subtitle:   Java学习
date:       2019-10-15
author:     张鹏
header-img: img/home-bg.jpg
catalog: true   
tags:                         
    - 题库
---

#### 1.下述代码的输出结果是多少？

```java
import java.util.Date;
public class Test extends Date{
    public static void main(String[] args){
        new Test().test();
    }
    public void test() {
    	System.out.println(super.getClass().getName());
    }
}
```

- 结果是Test
- 在test方法中，直接调用getClass().getName()方法，返回的是Test类名。由于getClass()在Object类中被定义为了final，子类不能覆盖该方法，所以，在test方法中调用getClass().getName()方法，其实就是调用从父类继承的getClass()方法，等效于调用super.getClass().getName()方法，所以，super.getClass().getName()方法返回的也应该是Test
- 如果想要得到父类的名称，那么就应该写成`getClass().getSuperClass().getName();`

#### 2.如何把一段逗号分隔的字符串转换成一个数组？

- 1.用正则表达式：`String[] result=orgStr.split(",");`
- 2.用StringTokenizer，代码为:

```java
import java.util.StringTokenizer;
 
public class Main {
    public static void main(String[] args) {
 
        String str = "This is String , split by StringTokenizer, created by runoob";
        StringTokenizer st = new StringTokenizer(str);
        System.out.println("----- 通过逗号分隔 ------");
        StringTokenizer st2 = new StringTokenizer(str, ",");
 
        while (st2.hasMoreElements()) {
            System.out.println(st2.nextElement());
        }
    }
}
```

#### 3.下述代码一共创建了几个对象？

```java
String s="a"+"b"+"c"+"d";
```

- javac编译可以对字符串常量直接相加的表达式进行优化，不必等到运行期去进行加法运算处理，而是在编译时直接去掉其中的加号，直接将其编译成一个常量相连的结果。
- 所以题目中的代码在被编译的时候，相当于是新建了一个“abcd”的字符串，所以，之创建了一个String对象

#### 4.下述代码的输出结果是多少？

```java
public class smallT {

	public static void main(String[] args) {
		smallT t = new smallT();
		int b=t.get();
		System.out.println(b);
	}

	public int get() {
		try {
			return 1;
		}
		finally {
			return 2;
		}
	}
}
```

- 结果是2
- finally中的代码比return和break语句后执行。上述代码中的return并不是让函数马上返回，而是return语句执行后，将返回结果放到函数栈中，此时函数并不是马上返回，他要执行finally之后才会真正返回

#### 5.运行时异常与一般异常有什么不同？

- 运行时异常表示虚拟机的通常操作中可能遇到的异常，是一种常见运行错误。
- 异常表示程序运行过程中可能出现的非正常状态。
- Java编译器要求方法必须声明抛出可能发生的非运行时异常，但并不要求必须声明抛出未被捕获的运行时异常。

#### 6.Java中的异常处理机制的简单原理和应用。

- 异常指的是Java程序运行时（非编译）所发生的非正常情况或错误。Java使用面向对象的方式来处理异常，他把程序中发生的每个异常也都分别封装到一个对象来表示，该对象中包含有异常的信息。
- Java对异常进行了分类，不同类型的异常分别用不同的Java类表示，所有异常的根基类为java.lang.Throwable，Throwable下面又派生了两个子类：Error和Exception，Error表示应用程序本身无法克服和恢复的一种严重问题；Exception表示程序还能克服和恢复的问题，其中又分为系统异常和普通异常，系统异常是软件本身缺陷所导致的问题，例如：数组下标越界（ArrayIndexOutOfBoundsException）、空指针异常（NullPointerException）、类转换异常（ClassCastException）；普通异常是运行环境的变化或异常所导致的问题，例如：网络断开，硬盘空间不足等。
- Java为系统异常和普通异常提供了不同的解决方案，编译器强制普通异常必须try...catch处理或用throws声明继续抛给上层调用方法处理。所以普通异常也成为checked异常，而系统异常可以处理也可以不处理，所以系统异常也成为unchecked异常。

#### 7.Java中有几种方法可以实现一个线程？用什么关键字修饰同步方法？stop()和suspend()方法为何不推荐使用？

- 有两种实现方法：继承Thread类和实现Runnable接口
- 用synchronized关键字修饰同步方法
- 反对stop()方法，是因为它不安全。他会解除由线程获取的所有锁定，而且如果对象处于一种不连贯状态，那么其他线程就能在那种状态下检查和修改他们。
- 反对suspend()方法是因为它很容易发生死锁，调用suspend()的时候，目标线程会停下来，但却仍然持有在这之前获得的锁定。此时，其他任何线程都不能访问锁定的资源，除非被挂起的线程恢复运行。对任何线程来说，如果他们想恢复目标线程，同时又使用任何一个锁定的资源，就会造成死锁，所以不应该使用suspend()，而应该在Thread类中置入一个标志，指出线程当前是活动还是挂起，若标志指出线程应该挂起，使用wait()命令让其进入等待状态，若标志指出线程应当恢复，则用一个notify()重新启动线程。

#### 8.sleep()和wait()有什么区别？

- sleep()是Thread类的方法，导致此线程暂停执行指定时间，把执行机会让给其他线程，但是监控状态依然保持，到指定时间后会自动恢复。调用sleep()方法不会释放对象锁。
- wait()是Object类的方法，对此对象调用wait方法将导致本线程放弃对象锁，进入等待此对象的等待锁定池，只有针对此对象发出notify()方法（或notifyAll），本线程才进入对象锁定池准备获得对象进入运行状态。

#### 9.同步与异步有什么区别？在什么情况下分别使用他们？

- 如果数据将在线程间共享，例如正在写的数据以后可能被另一个线程读到，或者正在读的数据可能已经被另一个线程写过了，那么这些数据就是共享数据，必须进行同步存取
- 当应用程序在对象上调用了一个需要花费很长时间来执行的方法，并且不希望让程序等待方法的返回时，就应该使用异步编程，很多情况下采用异步编程往往更有效率。

#### 10.启动一个线程是用run()还是用start()？

- 启动一个线程是调用start()方法，使线程就绪状态，以后可以被调度为运行状态，一个线程必须关联一些具体的执行代码，run()方法是该线程所关联的执行代码。