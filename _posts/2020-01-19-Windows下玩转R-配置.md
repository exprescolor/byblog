---
layout:     post
title:      Windows下玩转R语言之配置
subtitle:   利用scoop管理软件
date:       2020-01-19
author:     DR
header-img: img/blogcover/120624_39001.png
catalog: true
tags:
    - Blog
    - R
    - scoop
---



> 本文主要介绍R语言开发环境的搭建，并利用了```scoop```这个开源项目


这里推荐环境的安装使用Windows下的包管理器```scoop```
scoop安装软件有以下优点
- 集搜索、下载、安装、更新软件于一体：极大的降低了安装维护一个软件的成本，我们甚至不必在软件本身的复杂菜单中寻找那个更新按钮来更新软件自己，官方有```bucket```数据源会实时更新版本下载链接
- 将软件干干净净的安装到电脑的「用户文件夹」下：这样既不会污染路径也不会请求不必要的权限（UAC）
- 在卸载软件的时候，能够尽量清空软件在电脑上存储的任何数据和痕迹
- 不会污染你的Windows系统中的环境变量（毕竟你也不想你电脑中```path```下面有很多路径吧）
一下为利用```scoop```的安装方式

**以下安装顺序不能错乱**
# 1. 安装SCOOP

#### 1.1. 前提
- ```WindowsPoweshell```版本大于等于3
    打开您的```Poweshell```输入
    ```shell
    $psversiontable.psversion.major
    ```
- 确保您已允许PowerShell执行本地脚本
    ```shell
     set-executionpolicy remotesigned -scope currentuser
    ```
- [配置安装路径与全局安装路径](https://my.oschina.net/u/2311195/blog/3013687)（**注意:自定义安装目录下不要含有中文名**）
    ```shell
    [environment]::setEnvironmentVariable('SCOOP','D:\software\scoop','User')
    $env:SCOOP='D:\software\scoop'
    ```
    ```shell
    [environment]::setEnvironmentVariable('SCOOP_GLOBAL','D:\software','Machine')
    $env:SCOOP_GLOBAL='D:\software'
    ```
    ```D:\sofeware\scoop```与```D:\software```**这两个路径名不要相同可自定义，但不要相同**
#### 1.2. 安装
- 在shell中运行
```shell
    iex (new-object net.webclient).downloadstring('https://get.scoop.sh')
```
等待就OK
- 了解更多信息，输入```scoop```,或进入[官网](https://scoop.sh/)    

- 添加```bucket```
```shell
scoop bucket add extras
```
如果全球网络性差，此步可能需要很长时间
    
    
# 2. 搭建R语言开发环境
  
#### 2.1. R

[R](https://www.r-project.org/)主要用于统计学分析，及各种统计绘图,图表绘制等，是一个开源软件，因此应用较为广泛，

- 安装
```shell
scoop install R
```
- 它的更新是个问题，一般是手动官网下载，然后文件覆盖，着实麻烦，有了```scoop```，就方便许多，具体详情见后文scoop软件的更新

#### 2.2. 安装Rtools

我们在安装R语言的```packages```时，有时会遇到以下的情况，
  - 只有源码文件，没有编译好的二进制文件。
  - 或者有二进制文件，但版本过低
如果我们想要使用该包，则需要自己手动build，所用到的工具就是这个[Rtools工具](https://cloud.r-project.org/bin/windows/Rtools/)。

按照常理，我们需要将这个```Rtools```添加到环境变量中，但用了```scoop```就不需要了


```bat
scoop install Rtools
```




**在安装Rstudio之前，为了保险，先关闭所有的终端```shell```and```cmd```**

#### 2.3. 安装IDE--Rstudio

- 编写R，怎么能不要一个好的编辑器呢，（如果你觉得那个R自带的编辑器够用,可以不用安装Rstudio）

- 顺便说一下，```Rstudio```还可以进行**简单的科技排版**与**slides**绘制呢，更多有趣的功能等待你去挖掘

- 安装
```shell
scoop install rstudio
```
- 到此，你就可以愉快的玩R了


# 3. scoop软件的更新问题

- 运行命令```scoop update *```或```scoop update <app name>```
- 移除软件旧版本```scoop cleanup *```
- 清除安装缓存文件```scoop cache rm *```

这里推荐几个好玩的软件

```
#本地文件检索
scoop install everything


# 程序员笔记撰写
scoop install vnote

# B站视频下载或有关视频下载--基于命令行
scoop install youtube-dl


# 卸载Windows软件，也可以强力卸载微软商店安装的软件
scoop install geekuninstaller

# 视频播放器，支持绝大多数视频格式
scoop install vlc
```

---

> #  ```Reference```
> - [「一行代码」搞定软件安装卸载，用 Scoop 管理你的 Windows 软件](https://sspai.com/post/52496)
>
> - [windows包管理工具：scoop 安装，常用的配置及命令 ](https://my.oschina.net/u/2311195/blog/3013687) 