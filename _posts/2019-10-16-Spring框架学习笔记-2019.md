---
layout:     post                    # 使用的布局（不需要改）
title:      Spring框架学习笔记              # 标题 
subtitle:   Bean             #副标题
date:       2019-10-16              # 时间
author:     AhogeK                      # 作者
header-img: img/spring_post.png   #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - java
    - Spring框架
    - Bean
    - 学习笔记
---

## Bean 的作用域

> Bean 的作用域就是指 Bean 实例的生存空间或有效范围

* singleton
* prototype
* request *仅在基于 web 的 Spring ApplicationContext 情形下有效*
* session *同基于web 的 Spring ApplicationContext*
* global session *仅在使用 portlet context 时有效*

1. singleton(单实例)作用域

    ```xml
    <bean id="helloSpring" class="com.ssm.HelloSpring" scope="singleton">
        <property name="userName" value="张三" />
    </bean>
    ```

2. prototype(原型模式)作用域

    ```xml
    <bean id="helloSpring" class="com.ssm.HelloSpring" scope="prototype">
        <property name="userName" value="张三" />
    </bean>
    ```

## Bean 的装配方式

> 创建应用对象之间协作关系的行为通常称为装配（wiring），这也是依赖注入（Dependency Injection）的本质，Bean 的装配方式即 Bean 依赖注入。

1. 基于 XML 的 Bean 装配

    * Bean 类必须提供一个默认的构造方法 ``<property>``
    * Bean 类必须为需要注入的属性提供对应的 setter 方法 ``<constructor-arg>``

    ```xml
    <bean id="adminInfo" class="com.ssm.entity.AdminInfo">
        <property name="id" value="5" />
        <constructor-arg name="name" value="admin" />
        <constructor-arg name="pwd" value="123456" />
    </bean>
    ```

2. 基于 Annotation 的 Bean 装配

    * @Component 注解
    * @Repository 注解
    * @Service 注解
    * @Controller 注解
    * @Autowired 注解 *加上@Qualifier注解，可以直接指定一个Bean实例名称进行装配*
    * @Resource 注解 *相当于@Autowired,区别在于：@Autowired默认按照 Bean 类型进行装配， @Resource 默认按照 Bean 实例名称进行装配*
    * @Qualifier 注解 *将@Autowired按实例名称进行装配*

自动扫描包xml:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        https://www.springframework.org/schema/context/     spring-context.xsd">

    <context:component-scan base-package="org.example"/>

</beans>
```
1. 自动装配 （autowire属性）

    * default
    * byName
    * byType
    * constructor
    * autodetect
    * no

    ```xml
    <!-- 使用 bean 元素的 autowire 属性完成自动装配 -->
    <bean id="userDAO" class="com.ssm.dao.impl.UserDAOImpl"></bean>
    <bean id="userService" class="com.ssm.service.impl.UserServiceImpl" autowire="byname">
    ```