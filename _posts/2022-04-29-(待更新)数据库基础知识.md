---
layout:     post   				    # 使用的布局（不需要改）
title:      数据库基础知识			# 标题 
subtitle:                     #副标题
date:       2022-04-29 				# 时间
author:     谢玄xx 						# 作者
header-img: img/bit (4).jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - 数据库
    - 八股
---

数据库是必须要学的哇！在这里做一些微记录吧。

# 写在前面——为什么大家都在学习数据库？

随着“敏捷开发”概念盛行，运维开发正在一体化，这就要求开发人员了解数据库，从而针对项目进行数据库的优化。

数据库本是Oracle的天下，但随着阿里提出去Oracle化，大家越来越倾向使用开源的MySQL库。



# 数据库概述

SQL(Structured Query Language:结构化查询语言)是用于管理关系数据库管理系统（RDBMS）的一种语言。SQL的范围包括数据插入、查询、更新和删除，数据库模式创建和修改，以及数据访问控制。

# 数据库基本语法——SQL语句

SQL语句对程序的大小写不敏感。大写和小写是一样的。

一些最重要的 SQL 命令：  
SELECT - 从数据库中提取数据  
UPDATE - 更新数据库中的数据  
DELETE - 从数据库中删除数据  
INSERT INTO - 向数据库中插入新数据  
CREATE DATABASE - 创建新数据库  
ALTER DATABASE - 修改数据库  
CREATE TABLE - 创建新表  
ALTER TABLE - 变更（改变）数据库表  
DROP TABLE - 删除表  
CREATE INDEX - 创建索引（搜索键）  
DROP INDEX - 删除索引

## SELECT


# 常见问题

## MySQL有哪几种数据存储引擎？有什么区别？

通过在MySQL中输入show ENGINES就可以看到数据库支持的各引擎名称。最常用的是InnoDB和MyISAM。

![](https://raw.githubusercontent.com/xie96808/xie96808.github.io/master/img/shujuku1.JPG)

MyISAM & InnoDB的区别：
1. 存储文件方式不同。MyISAM每个表有两个文件——MYD(数据文件)和MYISAM(索引文件)，而InnoDB每个表只有一个文件，也即.IBD文件。
2. InnoDB支持事务(transactions)，XA事务，savepoints(及时存档，部分回滚)，支持行级锁(row-level locking)，支持外键(foreign keys)。

## 什么是脏读、幻读、不可重复读？要怎么处理？

## 事务的基本特性和隔离级别有哪些？

## MySQL的锁有哪些？

从锁的粒度来区分，分为行锁，表锁和全局锁。

* 行锁

行锁的优点是加锁粒度小，但缺点是加锁资源开销比较大。innoDB支持行锁。行锁又分为共享锁，排他锁和自增锁三种。

1. 共享锁——读锁。多个事务可以对**同一个数据**共享一把锁。持有锁的事务都可以访问数据，但只能读不能修改。使用方法为：select xxx lock in share mode
2. 排他锁——写锁。只有一个事务可以获得排他锁，其他事务都不能获取该行的锁。innoDB会对update/delete/insert语句**自动添加排他锁**，如：select xxx for update
3. 自增锁——通常针对MySQL当中的自增字段。如果出现“事务回滚”的情况，数据会回滚，但自增序列不会回滚，相当于“锁住了”。  

* 表锁

表锁的优点是加锁资源开销比较小，对应的缺点就是加锁粒度比较大啦。目前innoDB和MYISAM都支持表锁。同样地，表锁也分为共享读锁和排他写锁。此外还有一种意向锁。

1. 共享锁——读锁
2. 排他锁——写锁
3. 意向锁——也是由innoDB自动添加。

* 全局锁

Flush tables with read lock. 加了全局锁后，整个数据库实例都处于只读状态。所有的数据变更操作都会被挂起，一般会在全库数据备份的时候用。

## 什么是间隙锁？

间隙锁是常用锁算法中的一种，还有记录锁和Next-Key锁

* 间隙锁——锁住一个区间，防止幻读。如(1, 4, 9)之后，update user set xxx where userid = 5; REPEATABLE READ 就会使间隙锁锁住(5,9)区间。
* 记录锁
* Next-Key锁
