---
layout:     post   				    # 使用的布局（不需要改）
title:      静态成员变量&函数				# 标题 
subtitle:   面向对象程序设计 #副标题
date:       2022-04-11 				# 时间
author:     谢玄xx						# 作者
header-img: img/sea3.jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - 面向对象
    - 八股
---

# 静态成员：在说明前面加上**static**关键字的成员。

```CPP

```
## 静态成员变量与普通成员变量的区别

* 普通成员变量在类中被定义后，不同对象的变量值不同；
* 静态成员变量被定义后，不同对象的值都是这个变量值。
* 静态成员变量本质上来说是**全局变量**。哪怕一个对象都不存在，类的静态成员变量也是存在的。它不依附于对象的存在而存在。(独立！)

* **请注意！** sizeof()运算符不会计算静态成员变量！！

原因：静态成员变量static是放在所有对象外面的变量，为所有对象共享。

```CPP
class CMyclass
{
    int n;
    static int s;
};
// sizeof(CMyclass) = 4 而不是8！
```
## 静态成员函数与普通成员函数的区别

* 普通成员函数必须具体作用于某个对象(在主函数中的调用方法： 对象名.成员函数名  or  指针->成员函数名  or 引用.成员函数名)
* 而静态成员函数并不具体作用于一个对象(渣男行为)。
* 因此，静态成员**无需对象**即可访问。
* 静态成员函数本质上来说是**全局函数**

# 如何访问静态成员

## 类名::成员名

```CPP
CMyclass :: Print();
```

## 对象名.成员名(和普通成员函数一样)

```CPP
CMyclass c1;
c1.Print();
```
* 请注意，虽然写的是c1.函数名，但这个函数并不属于c1对象，也并不作用于c1对象。

## 指针->成员名(和普通成员函数一样)

```CPP
CMyclass *p1 = &c2;
p1->Print();
```
* 请注意，虽然写的是p1->函数名，但这个函数并不仅仅作用于p1所指向的那个对象c2。

## 引用.成员名

```CPP
CMyclass &p2 = &c3;
int n = p2.Print();
```
* 同样地，Print()函数不仅仅属于p2所引用的那个对象c2，而是CMyclass类所有对象共享。

# 静态成员实例分析

```CPP
#include <iostream>
using namespace std;

class CRectangle
{
private:
	int w, h;
	static int nTotalArea;
	static int nTotalNumber;
public:
	CRectangle(int w_, int h_);
	~CRectangle();
	static void PrintTotal();
};

CRectangle :: CRectangle(int w_, int h_)
{
	w = w_;
	h = h_;
	nTotalNumber++;
	nTotalArea += w * h;
}
CRectangle::~CRectangle()
{
	nTotalNumber--;
	nTotalArea -= w * h;
}

void CRectangle::PrintTotal()
{
	cout << nTotalNumber << "," << nTotalArea << endl;
}

//必须在定义类的文件中，对静态成员变量进行声明&初始化
//否则编译通过，生成.obj不通过
int CRectangle::nTotalNumber = 0;
int CRectangle::nTotalArea = 0;

int main()
{
	CRectangle r1(3, 3), r2(2, 2);
	//cout << CRectangle::nTotalNumber;	//不能这么写，nTotalNumber私有
	CRectangle::PrintTotal();
	r1.PrintTotal();//这一行的效果和上一行相同
	return 0;
}

//输出结果：
//2,13
//2,13
```
