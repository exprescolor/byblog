---
layout:     post
title:      java日志框架学习笔记
subtitle:   
date:       2019-07-18
author:     Chris
header-img: img/post-bg-BJJ.jpg
catalog: true
tags:
    - java, 日志, slf4j, log4j
---

# 日志打印机制



![日志打印调用栈](http://ww2.sinaimg.cn/large/006tNc79ly1g54bgn75eej30xb0bjgoe.jpg)



# 各种日志实现api介绍

记住，日志总体上来讲，分为两部分：1）给用户使用的api；2）实际执行写入日志工作的核心代码。   
有的jar包，包含了上面两部分，即api和实现类就在一个包里面。
- 常用的api类有：
slf4j，jcl，jul，log4j，log4j2
- 实现类：
log4j，log4j2，logback 
可以看出，log4j和log4j2同时包含了供用户使用的api和实现类。而slf4j只包含有api，没有实现类，因此，单独使用slf4j是无法打印日志的。

除了上面两类之外，还有一类是起到绑定作用或者桥接作用的jar包。绑定是关联api和实现类，将api的操作委托给某个实际执行打印工作的实现类。桥接是将某个api a的操作转交给另外一个api b来做，这样，实际上是api b完成日志的打印工作。

- 桥接类：



- 绑定类：



# 使用slf4j + log4j2的例子

```xml
<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN">
  <Appenders>
    <Console name="Console" target="SYSTEM_OUT">
      <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </Console>
  </Appenders>
  <Loggers>
    <Root level="error">
      <AppenderRef ref="Console"/>
    </Root>
  </Loggers>
</Configuration>
```

# 常见问题及解决

```text
ERROR StatusLogger No log4j2 configuration file found. Using default configuration: logging only errors to the console.
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/Users/chris/.m2/repository/org/slf4j/slf4j-log4j12/1.6.1/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/Users/chris/.m2/repository/org/apache/logging/log4j/log4j-slf4j-impl/2.2/log4j-slf4j-impl-2.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]
```

```text
ERROR StatusLogger No log4j2 configuration file found. Using default configuration: logging only errors to the console.
```

# 总结


# 参考
- [Java日志框架体系](https://blog.reactor.top/2019/03/20/Java%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6%E4%BD%93%E7%B3%BB/)
- [log4j 2 Configuration](http://logging.apache.org/log4j/2.x/manual/configuration.html)
- [Log4j 2 + Slf4j 的配置和使用](https://blog.csdn.net/ClementAD/article/details/44625787)
- [Log4J进阶](https://bryantchang.github.io/2018/05/30/log4j-adv)
- [log4j2异步那些事(2)--AsyncLogger](https://bryantchang.github.io/2019/01/15/log4j2-asyncLogger)