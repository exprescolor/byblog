---
layout:     post 
title:      Java基础0902
subtitle:   流
date:       2019-09-02
author:     张鹏
header-img: img/post-bg-debug.png
catalog: true   
tags:                         
    - Java
---

# Java基础

## 流

### 输入/输出流的分类

- java.io包中定义了多个流类型（类或抽象类）来实现输入/输出功能；可以从不同角度对其进行分类
   - 按数据流的方向不同可分为输入流和输出流
   - 按照处理数据单位不同可分为字节流和字符流
   - 按照功能不同可分为节点流和处理流

- JDK所提供的所有流类型都位于包java.io内，都分别继承自以下四种抽象流类型

名称|字节流|字符流
:-:|:--:|--:
输入流|InputStream|Reader
输出流|OutputStream|Writer

### 节点流和处理流

- 节点流为可以从一个特定的数据源（节点）读取数据
- ![节点流](https://github.com/Jokerboozp/Jokerboozp.github.io/raw/master/img/%E6%89%B9%E6%B3%A8%202019-09-02%20112101.png)
- 处理流是“连接”在已存在的流（节点流或处理流）之上，通过对数据的处理为程序提供更为强大的读写能力
- ![处理流](https://github.com/Jokerboozp/Jokerboozp.github.io/raw/master/img/%E6%89%B9%E6%B3%A8%202019-09-02%20112114.png)
#### InputStream
   - 继承自InputStream的流都是用于向程序中输入数据，且数据的单位为字节（8bit）；下图深色为节点流，浅色为处理流
      - ![分类](https://github.com/Jokerboozp/Jokerboozp.github.io/raw/master/img/%E6%89%B9%E6%B3%A8%202019-09-02%20113037.png)

#### InputStream的基本方法
   - `int read() throws IOException`//读取一个字节并以整数的形式返回(0~255)，如果返回-1代表已到输出流的末尾
   - `int read(byte[] buffer) throws IOException`//读取一系列字节并存储到一个数组buffer，返回实际读取的字节数，如果读取前已到输入流的末尾返回-1
   - `int read(byte[] buffer,int offset,int length) throws IOException`//读取length个字节，并存储到一个字节数组buffer，从length位置开始。返回实际控制的字节数，如果读取前已到输入流的末尾返回-1
   - `void colse() throws IOException`//关闭流释放内存资源
   - `long skip(long n) throws IOException`//跳过n个字节不读，返回实际跳过的字节数

#### OutputStream

   - 继承自OutputStream的流是用于程序中输入数据，且数据的单位为字节（8bit）；下图深色为节点流，浅色为处理流
      - ![OutputStream](https://github.com/Jokerboozp/Jokerboozp.github.io/raw/master/img/%E6%89%B9%E6%B3%A8%202019-09-02%20134236.png)

#### OutputStream的基本方法
   - `void write(int b) throws IOException`//向输出流中写入一个字节数据，该字节数据为参数b的低8位
   - `void write(byte[] b) throws IOException`//将一个字节类型数据中的数组中的数据写入输出流
   - `void write(byte[] b,int off,int len) throws IOException`//将一个字节类型的数组中的数据从指定位置（off）开始的len个字节写入到输出流中
   - `void colse() throws IOException`//关闭流释放内存资源
   - `void flus() throws IOException`//将输出流中缓冲的数据全部写出到目的地

#### Reader

   - 继承自Reader的流都是用于向程序中输入数据，且数据的单位为字符（16bit）；下图中深色为节点流，浅色的为处理流。
      - ![reader](https://github.com/Jokerboozp/Jokerboozp.github.io/raw/master/img/%E6%89%B9%E6%B3%A8%202019-09-02%20135952.png)

#### Reader的基本方法
   - `int read() throws IOException`//读取一个字符并以整数的形式返回(0~255)，如果返回-1代表已到输出流的末尾
   - `int read(byte[] buffer) throws IOException`//读取一系列字符并存储到一个数组buffer，返回实际读取的字节数，如果读取前已到输入流的末尾返回-1
   - `int read(byte[] buffer,int offset,int length) throws IOException`//读取length个字符，并存储到一个数组buffer，从length位置开始。返回实际读取的字符数，如果读取前已到输入流的末尾返回-1
   - `void colse() throws IOException`//关闭流释放内存资源
   - `long skip(long n) throws IOException`//跳过n个字符不读，返回实际跳过的字符数

#### Writer

   - 继承自Writer的流都是用于程序中输出数据，且数据的单位为字符（16bit）；下图深色的为节点流，浅色的为处理流
   - ![Writer](https://github.com/Jokerboozp/Jokerboozp.github.io/raw/master/img/%E6%89%B9%E6%B3%A8%202019-09-02%20141104.png)

#### Writer的基本方法

   - `void write(int b) throws IOException`//向输出流中写入一个字符数据，该字符数据为参数b的低16位
   - `void write(byte[] b) throws IOException`//将一个字符类型数据中的数组中的数据写入输出流
   - `void write(byte[] cbuf,int offset,int length) throws IOException`//将一个字符类型的数组中的数据从指定位置（offset）开始的lenth个字符写入到输出流中
   - `void write(String string) throws IOException`//将一个字符串中的字符写入到输出流
   - `void colse() throws IOException`//关闭流释放内存资源
   - `void flus() throws IOException`//将输出流中缓冲的数据全部写出到目的地

#### 节点流类型

![节点流类型](https://github.com/Jokerboozp/Jokerboozp.github.io/raw/master/img/%E6%89%B9%E6%B3%A8%202019-09-02%20142038.png)

- 例1：

```java
import java.io.*;
public class TestFileInputStream{
    public static void main(String[] args){
        int b=0;
        FileInputStream in=null;
        try{
            in =new FileInputStream("E:\\test\\Animal.java");
        }catch(FileNotFoundException e){
            System.out.println("找不到指定文件");
            System.exit(-1);
        }
        try{
            long num=0;
            while((b=in.read())!=-1){
                System.out.print((char)b);
                num++;
            }
            in.close();
            System.out.println();
            System.out.println("共读取了"+num+"个字节");
        }catch(IOException el){
            System.out.println("文件读取错误");
            System.exit(-1);
        }
    }
}
```