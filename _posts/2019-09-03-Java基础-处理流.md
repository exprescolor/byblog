---
layout:     post 
title:      Java基础0903
subtitle:   处理流
date:       2019-09-03
author:     张鹏
header-img: img/post-bg-debug.png
catalog: true   
tags:                         
    - Java
---

# Java基础

## 处理流

![处理流类别](https://github.com/Jokerboozp/Jokerboozp.github.io/raw/master/img/%E6%89%B9%E6%B3%A8%202019-09-03%20084141.png)

### 缓冲流

- 缓冲流要“套接”在相应的节点流之上，对读写的数据提供了缓冲的功能，提高了读写的效率，同时增加了一些新的方法
- JDK提供了四种缓存流，其常用的构造方法为：

```java
BufferedReader(Reader in)
BufferedReader(Reader in,int sz)//sz为自定义缓存区大小
BufferedWriter(Writer out)
BufferedWriter(Writer out,int sz)
BufferedInputStream(InputStream in)
BufferedInputStream(InputStream in,int size)
BufferedOutputStream(OutputStream out)
BufferedOutputStream(OutputStream out,int size)
```

- 缓冲输入流支持其父类的mark和reset方法
- BufferedReader提供了readLine方法用于读取一行字符（以\r或\n分隔）
- BufferedWriter提供了newLine用于写入一个行分隔符
- 对于输出的缓冲流，写出的数据会现在内存中缓存，使用flush方法将会使内存中的数据立刻写出
- 例1：

```java
import java.io.*;
public class TestBufferStream{
    public static void main(String[] args){
        try{
            FileInputStream fis=new FileInputStream("E:\\test\\Animal.java");
            BufferedInputStream bis=new BufferedInputStream(fis);
            int c=0;
            System.out.println(bis.read());
            System.out.println(bis.read());
            bis.mark(100);
            for(int i=0;i<10 && (c=bis.read())!=-1;i++){
                System.out.print(c+" ");
            }
            System.out.println();
            bis.reset();
            for(int i=0;i<10 && (c=bis.read())!=-1;i++){
                System.out.print(c+" ");
            }
            bis.close();
        }catch (IOException e){
            e.printStackTrace();
        }
    }
}
```

- 例2：

```java
import java.io.*;
public class TestBufferStream{
    public static void main(String[] args){
        try{
            BufferedWriter bw=new BufferedWriter(new FileWriter("E:\\test\\Animal.java"));
            BufferedReader br=new BufferedReader(new FileReader("E:\\test\\Animal.java"));
            String s=null;
            for(int i=0;i<=100;i++){
                s=String.valueOf(Math.random());
                bw.write(s);
                bw.newLine();
            }
            bw.flush();
            while((s=br.readLine())!=null){
                System.out.println(s);
            }
            bw.close();
            br.close();
        }catch(IOException e){
            e.printStackTrace();
        }
    }
}
```