---
layout:     post 
title:      Java基础0914
subtitle:   事件监听
date:       2019-09-14
author:     张鹏
header-img: img/post-bg-debug.png
catalog: true   
tags:                         
    - Java
---

# Java基础

## 事件监听

#### 事件和监听该事件的接口一一对应

![事件监听](https://github.com/Jokerboozp/Jokerboozp.github.io/raw/master/img/%E6%89%B9%E6%B3%A8%202019-09-14%20103548.png)

- 例1：

```java
import java.awt.*;
import java.awt.event.*;
public class TestActionEvent{
    public static void main(String[] args){
        Frame f=new Frame("Test");
        Button b=new Button("Press me");
        Monitor bh=new Monitor();
        b.addActionListener(bh);
        f.add(b,BorderLayout.CENTER);
        f.pack();
        f.setVisible(true);
    }
}
class Monitor implements ActionListener{
    public void actionPerformed(ActionEvent e){
        System.out.println("a button has been pressed");
    }
}
```

- 例2：

```java
import java.awt.*;
import java.awt.event.*;
public class TestActionEvent{
    public static void main(String[] args){
        Frame f=new Frame("Test");
        Button b1=new Button("start");
        Button b2=new Button("end");
        Monitor bh=new Monitor();
        b1.addActionListener(bh);
        b2.addActionListener(bh);
        b2.setActionCommand("game over");
        f.add(b1,"North");
        f.add(b2,"Center");
        f.pack();
        f.setVisible(true);
    }
}
class Monitor implements ActionListener{
    public void actionPerformed(ActionEvent e){
        System.out.println("a button has been pressed,the relative info is:\n"+e.getActionCommand());
    }
}
```

#### TestField事件监听

- TextField对象可能发生Action（光标在文本框内敲回车）事件。与该事件对应的事件类是java.awt.event.ActionEvent
- 用来处理ActionEvent事件是实现了java.awt.event.ActionListener接口的类的对象。ActionListener接口定义有方法：
   - `public void actionPerformed(ActionEvent e)`

- 实现该接口的类要在该方法中添加处理该事件的（Action）的语句
- 使用addActionListener(ActionListener l)方法为TextField对象注册一个ActionListener对象，当TextField对象发生Action事件时，会生成一个ActionEvent对象，该对象作为参数传递给ActionListener对象的actionPerformed方法在方法中可以获取该对象的信息，并作出相应的处理

#### 内部类
- 例子：
- 未使用内部类
```java
import java.awt.*;
import java.awt.event.*;
public class TFMath{
    public static void main(String[] args){
        new TFFrame().launchFrame();
    }
}

class TFFrame extends Frame{
	TextField num1,num2,num3;
    public void launchFrame(){
        num1=new TextField(10);
        num2=new TextField(10);
        num3=new TextField(15);
        Label lblPlus=new Label("+");
        Button btnEqual=new Button("=");
        btnEqual.addActionListener(new MyMonitor(this));
        setLayout(new FlowLayout());
        add(num1);
        add(lblPlus);
        add(num2);
        add(btnEqual);
        add(num3);
        pack();
        setVisible(true);
    }
}

class MyMonitor implements ActionListener{
	TFFrame tf=null;
	public MyMonitor(TFFrame tf){
		this.tf=tf;
	}
    public void actionPerformed(ActionEvent e){
        int n1=Integer.parseInt(tf.num1.getText());
		int n2=Integer.parseInt(tf.num2.getText());
		tf.num3.setText(""+(n1+n2));
    }
}
```
- 使用内部类

```java
import java.awt.*;
import java.awt.event.*;
public class TFMath{
    public static void main(String[] args){
        new TFFrame().launchFrame();
    }
}
class TFFrame extends Frame{
	TextField num1,num2,num3;
    public void launchFrame(){
        num1=new TextField(10);
        num2=new TextField(10);
        num3=new TextField(15);
        Label lblPlus=new Label("+");
        Button btnEqual=new Button("=");
        btnEqual.addActionListener(new MyMonitor());
        setLayout(new FlowLayout());
        add(num1);
        add(lblPlus);
        add(num2);
        add(btnEqual);
        add(num3);
        pack();
        setVisible(true);
    }
   class MyMonitor implements ActionListener{
    public void actionPerformed(ActionEvent e){
        int n1=Integer.parseInt(num1.getText());
		int n2=Integer.parseInt(num2.getText());
		num3.setText(""+(n1+n2));
    }
}
}
```