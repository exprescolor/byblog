---
layout:     post 
title:      Oracle复杂查询
subtitle:   复杂查询关键字
date:       2019-08-30
author:     张鹏
header-img: img/post-bg-debug.png
catalog: true   
tags:                              
    - Oracle
---

# Oracle复杂查询
------
### 组合查询

- `UNION、UNION ALL、_INTERSECT、MINUS`
   - `UNION`可以完成将两个以上的表的相类似的查询结果合并在一起，并且相同的只取其一
   `SELECT emp_no,emp_name from emp1 UNION SELECT emp_no,emp_name from emp2;`
   - `UNION ALL`也可以完成将两个以上的表的相类似的查询结果合并在一起，如果有相同记录，不会去掉相同记录
   `SELECT emp_no,emp_name from emp1 UNION ALL SELECT emp_no,emp_name from emp2;`
   - `_INTERSECT`:返回在两个查询结果中都有相同内容的信息
   `SELECT emp_no,emp_name from emp1 INTERSECT SELECT emp_no,emp_name from emp2;`
   - `MINUS`：返回只在一个查询中出现的信息
   `SELECT emp_no,emp_name from emp1 MINUS SELECT emp_no,emp_name from emp2;`
   
------

- `DECODE`
   - 在逻辑编程中，经常用到If-Then-Else进行逻辑判断。在DECODE的语法中，实际上就是这样的逻辑处理过程。语法如下：
   `DECODE(value,if1,then1,if2,then2,if3,then3,...,else)`
   - `value`代表某个表的任何类型的任意列或一个通过得到的任何结果。当每一个value值被测试，如果value的值为if1，DECODE函数的结果就是then1；如果value的值等于if2，DECODE函数的结果就是then2；事实上，可以给出多个if/then配对。如果value结果不等于给出的任何配对时，DECODE结果就返回else。
   - 需要注意的是，这里的if、then、else都可以是函数或计算表达式
   - 例：
   `SELECT emp_no,emp_name,decode(emp_type,'01','正式员工','02','派遣员工','03','外包员工','其他员工')emp_type from emp;`

