---
layout:     post
title:      UML类图
subtitle:   统一建模语言(Unified Modeling Language)
date:       2019-07-18
author:     HH
header-img: img/post-bg-debug.png
catalog: true
tags:
    - UML类图
    - 统一建模语言
---

# UML类图

#### 参考

[简书 ·蛇发女妖](https://www.jianshu.com/p/2828874af134)

这篇文章来总结下UML类图，本来不打算讲UML类图的，因为我在学习设计模式的时候，一遇到有关UML的就会自动忽略，一看感觉就很复杂。但是随着学习的深入，发现不掌握UML类图，对设计模式或者某一个框架没有整体的把控。所以与其逃避，不如敢于面对，今天就让我们一起来了解下什么是UML类图。

说到UML类图，我们先来看下什么是UML。在维基百科上对它的定义如下：

>UML即`统一建模语言（Unified Modeling Language）`,它是一种开放的方法，用于说明、可视化、构建和编写一个正在开发的、面向对象的、软件密集系统的制品的开放方法。UML展现了一系列最佳工程实践，这些最佳实践在对大规模，复杂系统进行建模方面，特别是在软件架构层次已经被验证有效。

从定义上看可能有点抽象，说白了就是一种由图表组成的标准化建模语言，一般我们理解的语言都是由文字组成，而这种统一建模语言是由图表组成的。我们知道开发一个软件系统，不光只有程序员参与，另外还有分析师、设计师、测试人员等等，为了让不同人能够理解交流这个软件系统，就诞生出了这么一套语言。我们说过这个语言是有图表组成的，这里的图表有好几种类型，最常用的有：用**例图**、**类图**、**序列图**、**状态图**、**活动图**、**组件图**和**部署图**等。由于本文主要讲解**类图**，其他就不深入了解了，感兴趣的同学可以上网搜索这方面的内容。

好了言归正传，我们重点看下类图，类图描述了我们软件系统中类与类的关系。既然描述是类与类的关系，我们就先来看下一个类是如何表示的，再来看下他们之间的关系。首先我们定义一个非常简单的Person类，代码如下：

```java
public class Person {
   private String name;
   private int age =1;

   public String getName() {
      return name;
   }
   public int getAge() {
      return age;
   }
   public void setName(String name) {
      this.name=name;
   }
   public void setAge(int age) {
      this.age=age;
   }

}
```

这个Person类很简单，定义了两个字段name和age其中age有一个初始化值1，另外定义name和age的set、get方法。很简单，然后我们来看下这个类在UML类图中是如何表示的：

![Person类图](http://lemonhh.com/img/2019-07-18/1.png)

可以看到我们画了一个矩形，然后从上到下分割成三格，第一格为类名，第二格为类中字段属性，这里属性的表达也是有一定格式的，如下：

> 权限  属性名：类型 [ = 默认值 ]

由于这里我们的name和age都是私有的，所以在前面加一个`-`，另外还有其他几种权限：public 、protected、default，它们分别对应`+`、`#`、`~`。由于我们这里的age有一个默认值1，所以在类型后面再加上‘=1’来表示。接下来来看下第三格，第三格为类的方法，其格式如下：


> 权限  方法名称(参数列表) [ : 返回类型]

也很简单，相信你一看就会，其中返回类型是可选项，这里就不做过多的解释了。

## 类之间的关系

好了，上面我们简单了解了下，一个类在类图中的表示方式，接下我们来了解下类与类的关系，类与类一共有如下几种关系：泛化（Generalization）、实现（Realization）、依赖（Dependence）、关联（Association）、聚合（Aggregation）、组合（Composition）。

想必大家一定听过这么一首儿歌：我在马路边捡到一分钱然后交给警察叔叔。接下来我就根据这个故事来一个一个讲解下类与类之间的关系。

#### 泛化关系

泛化关系在Java中也叫作继承关系，在UML中我们用带空心三角形的直线来表示，我们增加两个类，一个Studen类，一个警察Policemen类，两个类均继承自Person类，那么他们的类关系图表示如下：

![generalization](http://lemonhh.com/img/2019-07-18/2.png)

#### 实现关系

这里的实现关系就是Java中类与接口的实现关系，在UML中我们用带空心三角形的虚线表示。由于Student和Policeman都职业，学生的职业就是学习，而警察的职业为保护人民。所有这里我们定义一个接口，里面有一个职业的方法：

```java
public interface ICareer{
    void career();
}
```

这个接口用UML类图表示如下：

![interface](http://lemonhh.com/img/2019-07-18/3.png)

可以看到在接口名字上多了一个`<<interface>>`字符来表示这个为接口。接下来我们让Student和Policeman都实现这个接口，UML类图如下：

![realization](http://lemonhh.com/img/2019-07-18/4.png)

#### 依赖关系

依赖关系是一种很弱的关系，一般是指一个类使用另一个类，这里学生捡到钱交给警察叔叔，学生和警察叔叔就是一种依赖关系。因为学生捡到钱给警察是一种偶然的事情，交给警察后他们之间就没有关系了。我们在学生类中加入一个交钱的方法，在警察类中加入一个收钱的方法，当调用学生的交钱方法时，就调用警察的收钱方法。Student的代码如下：

```
public class Student{
....
....
public Policemen policemen;

.....
public void sendCoin(){
    policemen.receiveCoin();
}
}
```

可以看到Student类中引用了Policemen类，也就是说Student依赖了Policemen，这种依赖关系我们用带箭头的虚线表示，箭头指向被依赖对象，这里也就是Policemen，UML类图表示如下：

![dependence](http://lemonhh.com/img/2019-07-18/5.png)

#### 关联关系

关联关系是一种比较强的关系，他们的关系是比较持久的，稳定的。比如学生从家里出来，学生和家就是一种关联关系。这种关系是比较稳定的。关联分单向关联和双向关联，如果一个类知道或者引用了另一个类，而另一个类不知道或者没有引用这个类，则这两个类是单向关联的。比如这里学生与家的关系就是单向关联的，因为每个学生都是有个家的（不考虑孤儿），但不能说每个家里都有学生。单向关联我们用带箭头的实线表示，箭头指向被引用或者被包含的类，这里也就是家这个类。示例如下：

![association](http://lemonhh.com/img/2019-07-18/6.png)

双向关联是两个类彼此都知道对方的存在，比如老师与学生的关系就是双向的。小明的语文老师是张老师，张老师的学生有小明。双向关联用不带箭头的实线来连接两个类。示例如下：

![association](http://lemonhh.com/img/2019-07-18/7.png)

#### 聚合关系

聚合关系是一种特殊的关联关系，聚合关系强调的是整体和部分的关系，其中部分可以脱离整体而存在。比如雁群和一只大雁的关系，就是聚合关系，大雁离开雁群还是可以独立存在的。再比如警察与制服的关系，制服也是警察的一部分，制服可以脱离警察而存在。在UML类图中聚合用带空心菱形的直线表示，其中菱形指向整体：

![aggregation](http://lemonhh.com/img/2019-07-18/8.png)

#### 组合关系

组合关系也是一种特殊的关联关系，它与聚合关系很像，也是强调整体与部分的关系，不同的是部分无法脱离整体存在。比如学生用手捡钱，其中手就是学生的一部分，但是手不能脱离学生而单独存在。要是手能独立存在想想就可怕。。。这里我们称学生与手为组合关系，用带实心的菱形直线表示，其中菱形指向整体：

![composition](http://lemonhh.com/img/2019-07-18/9.png)

好了，这几种关系到这里也就差不多了，其实你会发现，依赖、关联、聚合、组合这几种关系强度是越来越强的：组合>聚合>关联>依赖。

最后，你会发现你已经不知不觉用UML类图完成上面小学生捡钱的故事：

![composition](http://lemonhh.com/img/2019-07-18/10.png)

> 注：本文采用的画图工具为StarUML，有需要的可以上网下一下

