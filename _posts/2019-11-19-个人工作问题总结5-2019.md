---
layout:     post                        # 使用的布局（不需要改）
title:      个人工作问题总结5             # 标题 
subtitle:   Stream使用/IDEA补全快捷键/校验Json/IServer分页           # 副标题
date:       2019-11-19                  # 时间
author:     AhogeK                      # 作者
header-img: https://ahogek.github.io/img/post-bg-debug.png     # 这篇文章标题背景图片
catalog: true                           # 是否归档
tags:                                   # 标签
    - 工作
    - 问题总结
    - JDK8 Stream
---

### JDK8 Stream使用

```
+--------------------+       +------+   +------+   +---+   +-------+
| stream of elements +-----> |filter+-> |sorted+-> |map+-> |collect|
+--------------------+       +------+   +------+   +---+   +-------+
```

在 Java 8 中, 集合接口有两个方法来生成流：
* **stream()** − 为集合创建串行流。
* **parallelStream()** − 为集合创建并行流。

#### forEach

``random.ints().limit(10).forEach(System.out::println);``

#### map

``List<Integer> squaresList = numbers.stream().map( i -> i*i).distinct().collect(Collectors.toList());``<br>
*以此可以获取对应的平方数*

#### filter

``long count = strings.stream().filter(string -> string.isEmpty()).count();``

#### limit

``random.ints().limit(10).forEach(System.out::println);``

#### sorted

``random.ints().limit(10).sorted().forEach(System.out::println);``

#### 并行（parallel）程序

``int count = strings.parallelStream().filter(string -> string.isEmpty()).count();``
*parallelStream 是流并行处理程序的代替方法。*

#### Collectors
``List<String> filtered = strings.stream().filter(string -> !string.isEmpty()).collect(Collectors.toList());``

#### 采用java8 lambda表达式 实现java list 交集/并集/差集/去重并集

* 交集
``List<String> intersection = list1.stream().filter(item -> list2.contains(item)).collect(toList());``
* 差集(list1 - list2)
``List<String> reduce1 = list1.stream().filter(item -> !list2.contains(item)).collect(toList());``
* 并集

```java
List<String> listAll = list1.parallelStream().collect(toList());
List<String> listAll2 = list2.parallelStream().collect(toList());
listAll.addAll(listAll2);
```
* 去重并集
``List<String> listAllDistinct = listAll.stream().distinct().collect(toList());``
**一般有filter 操作时，不用并行流parallelStream ,如果用的话可能会导致线程安全问题**

### IntelliJ IDEA自动补全变量名称和属性名称的快捷键
自动补全变量名称 :``Ctrl + Alt + v``<br>
自动补全属性名称 :``Ctrl + Alt + f``

### java 判断字符串是否是json格式
1. 通过fastjson解析来判断

```java
public static boolean isJSON2(String str) {
	boolean result = false;
	try {
		Object obj=JSON.parse(str);
		result = true;
	} catch (Exception e) {
		result=false;
	}
	return result;
}
```

2. 简单判断是否为json格式(判断首尾字母是否为{}或[],如果都不是则不是一个JSON格式的文本。)

```java
public static boolean getJSONType(String str) {
	boolean result = false;
	if (StringUtils.isNotBlank(str)) {
		str = str.trim();
		if (str.startsWith("{") && str.endsWith("}")) {
			result = true;
		} else if (str.startsWith("[") && str.endsWith("]")) {
			result = true;
		}
	}
	return result;
}
```
**第一种方式比较校验比较严格，校验也比较准确。第二种判断比较简单，适合用于约定数据。**

### IServer 分页

```java
Page<UserEntity> page = new Page<UserEntity>();
page.setSize(4);
page.setCurrent(1L);
Page<UserEntity> userEntityPage  = (Page<UserEntity>)userService.page(page);
userEntityPage.getRecords().forEach(System.out::println);
```
