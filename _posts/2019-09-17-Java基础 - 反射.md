---
layout:     post 
title:      Java基础0917
subtitle:   反射
date:       2019-09-17
author:     张鹏
header-img: img/post-bg-debug.png
catalog: true   
tags:                         
    - Java
---

# Java基础

#### 反射（reflect）

- 类是用来描述一组对象的，反射机制是用来描述一组类的
   - Class：描述类本身
   - Field：描述类中的属性
   - Method：描述类中的方法
   - Constructor：描述类中的构造方法
   - Package：描述类所属的包
   - Annotation：描述类中的注解@Override（注解可以放在类上面，属性上面，方法上面，构造方法上面、参数前面）
- 上述6个组成了反射机制


![反射机制](https://github.com/Jokerboozp/Jokerboozp.github.io/raw/master/img/%E6%89%B9%E6%B3%A8%202019-09-17%20111305.png)

#### 如何获取Class

- `Class clazz=Class.forName("包名.类名");`
- `Class clazz=类名.class;`
- `Class clazz=对象.getClass();//Object类中的方法`

#### Class中的常用方法

```java
package testreflect;
import java.util.ArrayList;
public class TestMain {
    public static  void main(String[] args){
        //通过一个Class对象来操作Person.class类文件
        try {
            Class clazz = Class.forName("testreflect.Person");
            Object newInstance = clazz.newInstance();//相当于调用了Person类中的默认无参数构造方法创建对象
            System.out.println(newInstance);
            //获取类的修饰符
            int modifiers = clazz.getModifiers();
            System.out.println(modifiers);

            //类名字
            String name = clazz.getName();//类全名:testreflect.Person
            String simpleName = clazz.getSimpleName();//类名:Person
            System.out.println(name);
            System.out.println(simpleName);

            //获取类所在的包
            Package clazzPackage = clazz.getPackage();
            System.out.println(clazzPackage.getName());

            //获取当前类的父类
            Class superclass = clazz.getSuperclass();
            System.out.println(superclass);

            ArrayList<String> list = new ArrayList<>();
            //获取集合对应的class
            Class clazz1 = ArrayList.class;
            Class sclazz = clazz1.getSuperclass();
            if (sclazz!=null){
                System.out.println(sclazz.getName());
                sclazz=sclazz.getSuperclass();
            }

            //获取当前clazz所有的父接口
            Class[] interfaces = clazz1.getInterfaces();
            for (Class c:interfaces){
                System.out.println(c.getName());
            }
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}

```

#### Field类中的常用方法

```java
package testreflect;

import java.lang.reflect.Field;
import java.util.ArrayList;

public class TestMain {

    public static void main(String[] args) {
        //通过一个Class对象来操作Person.class类文件
        try {
            Class clazz = Class.forName("testreflect.Person");
            //通过clazz来获取类中的属性
            Field field = clazz.getField("name");
            //获取结构
            int modifiers = field.getModifiers();
            System.out.println(modifiers);
            //获取属性的类型
            Class<?> fieldType = field.getType();
            System.out.println(fieldType);
            //获取属性名
            String fieldName = field.getName();
            System.out.println(fieldName);


        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        }
    }
}
```