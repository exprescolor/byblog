---
layout:     post 
title:      Java基础0907
subtitle:   网络编程
date:       2019-09-07
author:     张鹏
header-img: img/post-bg-debug.png
catalog: true   
tags:                         
    - Java
---

# Java基础网络编程

### TCP/IP模型

- 应用层、传输层、网络层、物理+数据链路层

### IP协议

- IP协议是网际层的主要协议，支持网间互联的数据报通信。他提供的主要功能有：
   - 无连接数据报传送
   - 数据报路由选择和差错控制

### TCP和UDP协议

- TCP（transmission control protocol）是专门设计用于在不可靠的因特网上提供可靠的、端到端的字节流通信的协议。它是一种面向连接的协议。TCP连接是字节流而非报文流。
   - TCP可靠，但是比较慢
- UDP（user data protocol）向应用程序提供了一种发射封装的原始IP数据报的方法，并且发送时无需建立连接。是一种不可靠的连接。
   - UDP不可靠，但是慢

### Socket

- 两个Java应用程序可通过一个双向的网络通信连接实现数据交换，这个双向链路的一端称为一个socket。
- socket通常用来实现client-server连接
- java.net包中定义的两个类socket和ServerSocket，分别用来实现双向连接的client和server端
- 建立连接时所需要的寻址信息为远程计算机的IP地址和端口号（Port number）
   - 端口号分为TCP端口、UDP端口。每一个有65536个端口

### socket的Java程序

1.TCPServer

```java
import java.net.*;
import java.io.*;

public class TCPServer{
	public static void main(String[] args) throws Exception{
		ServerSocket ss=new ServerSocket(6666);
		while(true){
			Socket s=ss.accept();//accept是阻塞式的，等待信息过来，没有信息则一直等待
			DataInputStream dis=new DataInputStream(s.getInputStream());
			System.out.println(dis.readUTF());//readUTF也是阻塞式
			dis.close();
			s.close();
		}
		
	}
}
```
2.TCPClient

```java
import java.net.*;
import java.io.*;

public class TCPClient{
	public static void main(String[] args) throws Exception{
		Socket s=new Socket("127.0.0.1",6666);
		OutputStream os=s.getOutputStream();
		DataOutputStream dos=new DataOutputStream(os);
		dos.writeUTF("hello server!");
		dos.flush();
		dos.close();
		s.close();
	}
}
```