---
layout:     post   				    # 使用的布局（不需要改）
title:      CTF 				# 标题 
subtitle:   Hello World, Hello Blog #副标题
date:       2020-03-09 				# 时间
author:     s-seven 						# 作者
header-img: img/post-bg-2015.jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - 学习
---
#welcome to web

## PHP1

这道题相比上一道是用post方法，于是我装了hackbar插件来提交参数

最新版本的要付费，我下载了一个旧版本

![2.jpg](http://ww1.sinaimg.cn/large/005KQQDely1gcot7c6yjcj30wz06b74k.jpg)

先加载url，就是当前页面，再选择post date，输入传递的参数，OK。

## PHP 2 HTTP header

![2.jpg](http://ww1.sinaimg.cn/large/005KQQDely1gcouj0j9fwj30pp0b23yw.jpg)

思路：修改HTTP header中的User Agent为iPhone 9999     

>User-Agent是Http协议中的一部分，属于头域的组成部分，User Agent也简称UA。用较为普通的一点来说，是一种向访问网站提供你所使用的浏览器类型、操作系统及版本、CPU 类型、浏览器渲染引擎、浏览器语言、浏览器插件等信息的标识。UA字符串在每次浏览器 HTTP 请求时发送到服务器
>
>浏览器UA 字串的标准格式为： 浏览器标识 (操作系统标识; 加密等级标识; 浏览器语言) 渲染引擎标识 版本信息

我下载了Burp Suite来实现这个功能，这是一个用于攻击web 应用程序的集成平台，包含了许多工具。当Burp Suite 运行后，Burp Proxy 开启默认的8080 端口作为本地代理接口。通过设置一个web 浏览器使用其代理服务器，所有的网站流量可以被拦截，查看和修改。

![1.jpg](http://ww1.sinaimg.cn/large/005KQQDely1gcoupsb3y3j30jp0cgab8.jpg)

在intercept is on 下，打开该网页会被拦截，这时修改UA为题中给出格式，点击Forward发送，页面跳转拿到flag。

## PHP 4



![44.jpg](http://ww1.sinaimg.cn/large/005KQQDely1gcox5z5477j30b309ejrg.jpg)

> 知识点1：md5()函数：计算字符串的md5散列。

> 知识点2：==（判断值是否相等）===（判断值及类型是否相等）

> 知识点3：PHP弱类型，在某些情况下，PHP会把类数值数据（如含有数字的字符串等）转换成数值处理，== 运算符就是其中之一。在使用 == 运算符对两个字符串进行松散比较时，PHP会把类数值的字符串转换为数值进行比较，如果参数是字符串，则返回字符串中第一个不是数字的字符之前的数字串所代表的整数值。比如: ’3′ == ’3ascasd’结果为true。

思路：经过md5之后为0e开头的值会被解释成0，找到开头为0的md5值。（上网查）

浏览器传值即可

![4.jpg](http://ww1.sinaimg.cn/large/005KQQDely1gcoxli7ncvj30ec06rq2y.jpg)

## PHP 5

![2.jpg](http://ww1.sinaimg.cn/large/005KQQDely1gcoyg8mgbij30gb05f0sy.jpg)

这道题比上一道多了一个sha1()函数，首先name和password取值不为空且不相等，然后看sha1()这个函数

> 知识点：sha1()函数的作用即计算字符串的SHA-1散列。如果成功则返回已计算的 SHA-1 散列，如果失败则返回 FALSE。所以我们要输入的name和password必须保证他们的SHA-1散列相等，才能输出flag。

若两个函数返回值都为false，不就相等了吗。所以我们传入两个部位字符串的值，传入数组类型即可。

巴拉巴拉？name[]=1&password[]=2

## PHP 13(Once More)


    if (ereg ("^[a-zA-Z0-9]+$", $_GET['password']) === FALSE)

> ereg漏洞：即00截断，首先第一层检查需要绕过ereg漏洞，ereg()函数用指定的模式搜索一个字符串中指定的字符串,如果匹配成功返回true,否则,则返回false。搜索字母的字符是大小写敏感的
>
> 用正则匹配，如果有^[a-zA-Z0-9]+$则直接错误，我们可以用%00来截断，在%00之后的数值函数无法识别，ereg读到%00的时候，就截止了

else if (strlen($_GET['password']) < 8 && $_GET['password'] > 9999999)

> strlen()限制了长度小于8并且大小必须大于9999999,1e8=100000000 > 9999999

if (strpos ($_GET['password'], '*-*') !== FALSE)

> strpos()对password进行匹配，必须含有*-*，最终才输出flag

可构造password=1e8%00*-*

